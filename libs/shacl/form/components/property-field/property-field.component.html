<ng-container *ngIf="isReference">
  <div class="my-3 position-relative d-flex align-items-center">
    <span class="czls-title">
      {{ property['sh:name'] }} <ng-container *ngIf="(value | manyToArray).length as size">({{ size }})</ng-container>
    </span>
    <cz-property-description [property]="property"></cz-property-description>
    <cz-add-reference-button
      *ngIf="!isSingle || (isSingle && !value)"
      [property]="property"
      [value]="value"
      [isSingle]="isSingle"
      [propertyKey]="propertyKey"
    ></cz-add-reference-button>
  </div>
  <ng-container *ngIf="value | manyToArray as uris">
    <cz-node-forms
      *ngIf="uris.length > 0"
      class="d-block mb-3"
      [uris]="uris"
      [canBeRemoved]="minCount ? uris.length > minCount : true"
      (remove)="removeReference($event)"
    ></cz-node-forms>
  </ng-container>
</ng-container>

<ng-container *ngIf="!isReference">
  <div *ngIf="isSingle" class="row">
    <cz-attribute-field
      class="col-6"
      [class.col-lg-3]="!isLarge"
      [czNodeAttributeLinked]="propertyKey"
      [property]="property"
      [propertyKey]="propertyKey"
      [control]="control"
      (typeSet)="onTypeSet($event)"
    ></cz-attribute-field>
  </div>
  <fieldset *ngIf="!isSingle">
    <div class="row">
      <div class="col-12 d-flex align-items-baseline justify-content-start">
        <legend class="czls-title my-legend">{{ property['sh:name'] }}</legend>
        <button
          type="button"
          color="primary"
          mat-icon-button
          [disabled]="maxCount ? controls.length >= maxCount : false"
          (click)="addAttribute()"
        >
          <mat-icon>add</mat-icon>
        </button>
      </div>
    </div>
    <div class="row">
      <div *ngFor="let control of controls; let i = index" class="col-6 mt-2 d-flex align-items-baseline" [class.col-lg-3]="!isLarge">
        <cz-attribute-field
          [property]="property"
          [propertyKey]="propertyKey"
          [control]="control"
          [showLabel]="false"
          (typeSet)="onTypeSet($event)"
        ></cz-attribute-field>
        <button *ngIf="minCount ? controls.length > minCount : true" type="button" mat-icon-button (click)="removeAttribute(i)">
          <mat-icon>remove_circle</mat-icon>
        </button>
      </div>
    </div>
  </fieldset>
</ng-container>
