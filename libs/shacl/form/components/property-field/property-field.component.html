<ng-container *ngIf="isReference">
  <ng-container *ngFor="let uri of values$ | async; let count = count">
    <!-- TODO use cardinality for canBeRemoved -->
    <cz-node-form class="d-block mb-3" [nodeUri]="uri" [canBeRemoved]="true" (remove)="removeReference(uri)"></cz-node-form>
  </ng-container>
  <mat-card *ngIf="!isSingle" class="my-add-card mb-3" matRipple (click)="addReference()">
    <div class="d-flex justify-content-center">
      <mat-icon color="primary">add_circle</mat-icon>
    </div>
  </mat-card>
</ng-container>

<ng-container *ngIf="!isReference">
  <div *ngIf="isSingle" class="row">
    <cz-attribute-field
      class="col-6 col-lg-3"
      [czNodeAttributeLinked]="propertyKey"
      [property]="property"
      [propertyKey]="propertyKey"
      [control]="control"
    ></cz-attribute-field>
  </div>
  <fieldset *ngIf="!isSingle">
    <div class="row">
      <div class="col-12 d-flex align-items-baseline justify-content-start">
        <legend class="czls-title my-legend">{{ property['sh:name'] }}</legend>
        <button *ngIf="!isSingle" type="button" color="primary" mat-icon-button (click)="addAttribute()"><mat-icon>add</mat-icon></button>
      </div>
    </div>
    <div class="row">
      <div *ngFor="let control of controls" class="col-6 col-lg-3 mt-2 d-flex align-items-baseline">
        <cz-attribute-field [property]="property" [propertyKey]="propertyKey" [control]="control" [showLabel]="false"></cz-attribute-field>
        <button *ngIf="controls.length > 1" type="button" mat-icon-button><mat-icon>remove_circle</mat-icon></button>
      </div>
    </div>
  </fieldset>
</ng-container>
