<mat-toolbar>
  <div>
    Number of valid docs: {{ validDocsCount }}, Number of invalid docs: {{ invalidDocsCount }}, Number of errors: {{ errors.length }}
  </div>
  <div class="flex-grow-1"></div>
  <button mat-icon-button [disabled]="loading$ | async" (click)="downloadReport()">
    <mat-icon>file_download</mat-icon>
  </button>
</mat-toolbar>

<div class="my-table-container my-3">
  <!--todo add a search in errors-->
  <table
    mat-table
    multiTemplateDataRows
    [dataSource]="errors | slice: pagination.from:pagination.from + pagination.size"
    *ngIf="errors.length > 0"
  >
    <ng-container *ngFor="let column of columns" [matColumnDef]="column">
      <ng-container *ngIf="column !== 'Actions'">
        <th mat-header-cell *matHeaderCellDef class="czls-title pr-3">{{ column }}</th>
        <td mat-cell *matCellDef="let model" class="pr-3">
          {{ model[column] }}
        </td>
      </ng-container>

      <ng-container *ngIf="column === 'Actions'">
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let model">
            <a
              mat-icon-button
              [matTooltip]="'View doc info in Elastic Search'"
              target="_blank"
              [queryParamsHandling]="'merge'"
              [routerLink]="['../', 'search']"
              [queryParams]="{ uri: model.graphUri, _id: model.graphUri, viewType: 'table', from: 0, size: 10 }"
            >
              <mat-icon>pageview</mat-icon>
            </a>
          </td>
        </ng-container>
      </ng-container>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="columns"></tr>
    <tr mat-row *matRowDef="let row; columns: columns"></tr>
  </table>
  <cz-list-paginator [total]="errors.length" [pagination]="pagination" (changePagination)="onPaginationChange($event)"></cz-list-paginator>
</div>
